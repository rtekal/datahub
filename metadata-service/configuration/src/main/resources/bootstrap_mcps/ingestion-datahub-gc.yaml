# Instructions to add additional entry or update on the target system
# 1. Edit this file
# 2. Increment version in bootstrap_mcps.yaml for the entry referring to this file
- entityType: dataHubIngestionSource
  entityUrn: urn:li:dataHubIngestionSource:datahub-gc
  aspectName: dataHubIngestionSourceInfo
  changeType: UPSERT
  aspect:
    type: 'datahub-gc'
    name: '{{ingestion.name}}{{^ingestion.name}}datahub-gc{{/ingestion.name}}'
    schedule:
      timezone: '{{schedule.timezone}}{{^schedule.timezone}}UTC{{/schedule.timezone}}'
      interval: '{{schedule.interval}}{{^schedule.interval}}0 1 * * *{{/schedule.interval}}'
    config:
      version: 0.14.1.1rc5
      recipe:
        source:
          type: 'datahub-gc'
          config:
            cleanup_expired_tokens: {{cleanup_expired_tokens}}{{^cleanup_expired_tokens}}false{{/cleanup_expired_tokens}}
            truncate_indices: {{truncate_indices}}{{^truncate_indices}}true{{/truncate_indices}}
            dataprocess_cleanup:
              retention_days: {{dataprocess_cleanup.retention_days}}{{^dataprocess_cleanup.retention_days}}10{{/dataprocess_cleanup.retention_days}}
              delete_empty_data_jobs: {{dataprocess_cleanup.delete_empty_data_jobs}}{{^dataprocess_cleanup.delete_empty_data_jobs}}true{{/dataprocess_cleanup.delete_empty_data_jobs}}
              delete_empty_data_flows: {{dataprocess_cleanup.delete_empty_data_flows}}{{^dataprocess_cleanup.delete_empty_data_flows}}true{{/dataprocess_cleanup.delete_empty_data_flows}}
              hard_delete_entities: {{dataprocess_cleanup.hard_delete_entities}}{{^dataprocess_cleanup.hard_delete_entities}}false{{/dataprocess_cleanup.hard_delete_entities}}
              keep_last_n: {{dataprocess_cleanup.keep_last_n}}{{^dataprocess_cleanup.keep_last_n}}5{{/dataprocess_cleanup.keep_last_n}}
            soft_deleted_entities_cleanup:
              retention_days: {{soft_deleted_entities_cleanup.retention_days}}{{^soft_deleted_entities_cleanup.retention_days}}10{{/soft_deleted_entities_cleanup.retention_days}}
      extraArgs: {}
      debugMode: false
      executorId: default
  headers: {}